{"ast":null,"code":"var _jsxFileName = \"/Users/tahmidjamal/Desktop/bpm/process_optimization_tool/procopt/client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Chat from './Chat';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  // Add API base URL\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001';\n\n  // State for managing multiple jobs\n  const [jobs, setJobs] = useState([]);\n  const [selectedJobId, setSelectedJobId] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [uploadStatus, setUploadStatus] = useState('');\n  const [progress, setProgress] = useState({});\n\n  // Get the selected job from the jobs array\n  const selectedJob = jobs.find(job => job.runId === selectedJobId) || null;\n\n  // Progress status messages\n  const progressMessages = {\n    transcription: {\n      pending: \"Waiting to start...\",\n      processing: \"Analyzing process map...\",\n      complete: \"Process map analyzed\"\n    },\n    bottlenecks: {\n      pending: \"Waiting for process map...\",\n      processing: \"Identifying bottlenecks...\",\n      complete: \"Bottlenecks identified\"\n    },\n    improvements: {\n      pending: \"Waiting for bottlenecks...\",\n      processing: \"Generating improvement suggestions...\",\n      complete: \"Improvements generated\"\n    }\n  };\n\n  // Calculate overall progress percentage for a job\n  const calculateProgress = job => {\n    if (!job) return 0;\n    let progress = 0;\n\n    // Process map transcription (33%)\n    if (job.processMap) {\n      progress += 33;\n    } else if (job.transcriptionInProgress) {\n      // Calculate progress based on blocks\n      const blockProgress = job.processed_blocks / job.total_blocks * 33;\n      progress += blockProgress || 0;\n    }\n\n    // Bottlenecks identification (33%)\n    if (job.bottlenecks) {\n      progress += 33;\n    } else if (job.bottlenecksRequested) {\n      progress += 15;\n    }\n\n    // Improvements suggestions (34%)\n    if (job.improvements) {\n      progress += 34;\n    } else if (job.improvementsRequested) {\n      progress += 15;\n    }\n    return Math.min(100, Math.round(progress));\n  };\n\n  // Get status message for a specific step\n  const getStepStatus = (job, step) => {\n    if (!job) return progressMessages[step].pending;\n    switch (step) {\n      case 'transcription':\n        // Always show as processing when a file is uploaded since transcription starts immediately\n        if (job.processMap) return progressMessages.transcription.complete;\n        // Always show processing for transcription since it starts immediately after upload\n        return progressMessages.transcription.processing;\n      case 'bottlenecks':\n        if (job.bottlenecks) return progressMessages.bottlenecks.complete;\n        return job.bottlenecksRequested ? progressMessages.bottlenecks.processing : progressMessages.bottlenecks.pending;\n      case 'improvements':\n        if (job.improvements) return progressMessages.improvements.complete;\n        return job.improvementsRequested ? progressMessages.improvements.processing : progressMessages.improvements.pending;\n      default:\n        return \"Unknown step\";\n    }\n  };\n\n  // Polling effect for all jobs\n  useEffect(() => {\n    if (jobs.length === 0) return;\n    const interval = setInterval(async () => {\n      // Create a copy of jobs to update\n      const updatedJobs = [...jobs];\n      let hasUpdates = false;\n\n      // Check each job that's not complete\n      for (let i = 0; i < updatedJobs.length; i++) {\n        var _job$status;\n        const job = updatedJobs[i];\n\n        // Skip jobs that are already complete\n        if (job.status === 'complete' || (_job$status = job.status) !== null && _job$status !== void 0 && _job$status.includes('failed')) continue;\n        try {\n          const response = await fetch(`${API_URL}/runs/${job.runId}`);\n          const data = await response.json();\n\n          // Update job data\n          if (data.status !== job.status || data.transcription !== job.processMap || data.bottlenecks !== job.bottlenecks || data.improvements !== job.improvements) {\n            // Calculate the current step based on available data\n            let newCurrentStep = job.currentStep;\n            if (data.transcription) newCurrentStep = Math.max(newCurrentStep, 2);\n            if (data.bottlenecks) newCurrentStep = Math.max(newCurrentStep, 3);\n            if (data.improvements) newCurrentStep = Math.max(newCurrentStep, 4);\n            updatedJobs[i] = {\n              ...job,\n              status: data.status,\n              processMap: data.transcription || job.processMap,\n              bottlenecks: data.bottlenecks || job.bottlenecks,\n              improvements: data.improvements || job.improvements,\n              currentStep: newCurrentStep,\n              total_blocks: data.total_blocks || job.total_blocks,\n              processed_blocks: data.processed_blocks || job.processed_blocks,\n              transcriptionInProgress: data.transcription ? false : true\n            };\n            hasUpdates = true;\n\n            // Automatically trigger the next step if needed\n            if (data.transcription && !data.bottlenecks && !job.bottlenecksRequested) {\n              // Mark this job as having bottlenecks requested to prevent multiple requests\n              updatedJobs[i].bottlenecksRequested = true;\n              // Queue the bottlenecks identification (will run after the state update)\n              setTimeout(() => identifyBottlenecks(job.runId), 1000);\n            }\n            if (data.bottlenecks && !data.improvements && !job.improvementsRequested) {\n              // Mark this job as having improvements requested to prevent multiple requests\n              updatedJobs[i].improvementsRequested = true;\n              // Queue the improvements suggestion (will run after the state update)\n              setTimeout(() => suggestImprovements(job.runId), 1000);\n            }\n          }\n        } catch (error) {\n          console.error(`Error polling for updates for job ${job.runId}:`, error);\n        }\n      }\n\n      // Only update state if there were changes\n      if (hasUpdates) {\n        setJobs(updatedJobs);\n      }\n    }, 2000); // Poll every 2 seconds\n\n    // Cleanup function to clear interval when component unmounts\n    return () => clearInterval(interval);\n  }, [jobs, API_URL]);\n  const handleFileUpload = async event => {\n    const uploadedFiles = event.target.files;\n    if (uploadedFiles.length === 0) return;\n\n    // Process each file\n    for (let i = 0; i < uploadedFiles.length; i++) {\n      const file = uploadedFiles[i];\n      await processFile(file);\n    }\n  };\n  const handleDragOver = event => {\n    event.preventDefault();\n  };\n  const handleDrop = async event => {\n    event.preventDefault();\n    const droppedFiles = event.dataTransfer.files;\n    if (droppedFiles.length === 0) return;\n\n    // Process each file\n    for (let i = 0; i < droppedFiles.length; i++) {\n      const file = droppedFiles[i];\n      await processFile(file);\n    }\n  };\n  const processFile = async file => {\n    setLoading(true);\n    setUploadStatus(`Uploading ${file.name}...`);\n    const formData = new FormData();\n    formData.append('file', file);\n    try {\n      const response = await fetch(`${API_URL}/upload`, {\n        method: 'POST',\n        body: formData\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('Upload response:', data);\n      if (data.run_id) {\n        // Create a new job and add it to the jobs array\n        const newJob = {\n          runId: data.run_id,\n          fileName: file.name,\n          status: 'processing',\n          processMap: '',\n          bottlenecks: '',\n          improvements: '',\n          currentStep: 1,\n          uploadTime: new Date().toLocaleString(),\n          bottlenecksRequested: false,\n          improvementsRequested: false,\n          transcriptionInProgress: true // Mark transcription as in progress when file is uploaded\n        };\n        setJobs(prevJobs => [...prevJobs, newJob]);\n\n        // Select the new job if no job is selected\n        if (!selectedJobId) {\n          setSelectedJobId(newJob.runId);\n        }\n        console.log('New job created:', newJob);\n        setUploadStatus(`${file.name} uploaded successfully!`);\n        setTimeout(() => setUploadStatus(''), 3000);\n        pollProgress(data.run_id);\n      } else {\n        throw new Error('No run_id received from server');\n      }\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      setUploadStatus(`Upload failed for ${file.name}: ${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const identifyBottlenecks = async runId => {\n    if (!runId) return;\n\n    // Find the job and mark it as having bottlenecks requested\n    setJobs(prevJobs => prevJobs.map(job => job.id === runId ? {\n      ...job,\n      bottlenecksRequested: true\n    } : job));\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_URL}/runs/${runId}/process/bottlenecks`, {\n        method: 'POST'\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('Bottlenecks response:', data);\n    } catch (error) {\n      console.error('Error identifying bottlenecks:', error);\n      alert('Error identifying bottlenecks: ' + error.message);\n\n      // Reset the requested flag on error\n      setJobs(prevJobs => prevJobs.map(job => job.runId === runId ? {\n        ...job,\n        bottlenecksRequested: false\n      } : job));\n    } finally {\n      setLoading(false);\n    }\n  };\n  const suggestImprovements = async runId => {\n    if (!runId) return;\n\n    // Find the job and mark it as having improvements requested\n    setJobs(prevJobs => prevJobs.map(job => job.runId === runId ? {\n      ...job,\n      improvementsRequested: true\n    } : job));\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_URL}/runs/${runId}/process/improvements`, {\n        method: 'POST'\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('Improvements response:', data);\n    } catch (error) {\n      console.error('Error suggesting improvements:', error);\n      alert('Error suggesting improvements: ' + error.message);\n\n      // Reset the requested flag on error\n      setJobs(prevJobs => prevJobs.map(job => job.runId === runId ? {\n        ...job,\n        improvementsRequested: false\n      } : job));\n    } finally {\n      setLoading(false);\n    }\n  };\n  const downloadAsMd = async (runId, type) => {\n    if (!runId) return;\n    try {\n      const response = await fetch(`${API_URL}/runs/${runId}/export/${type}`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('Download response:', data);\n      const element = document.createElement('a');\n      const file = new Blob([data.content], {\n        type: 'text/markdown'\n      });\n      element.href = URL.createObjectURL(file);\n      element.download = data.filename;\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n    } catch (error) {\n      console.error('Error downloading file:', error);\n      alert('Error downloading file: ' + error.message);\n    }\n  };\n  const removeJob = runId => {\n    setJobs(prevJobs => prevJobs.filter(job => job.runId !== runId));\n\n    // If the removed job was selected, select another job or set to null\n    if (selectedJobId === runId) {\n      const remainingJobs = jobs.filter(job => job.runId !== runId);\n      setSelectedJobId(remainingJobs.length > 0 ? remainingJobs[0].runId : null);\n    }\n  };\n  const pollProgress = async jobId => {\n    try {\n      const response = await fetch(`${API_URL}/runs/${jobId}/progress`);\n      const data = await response.json();\n      setProgress(prev => ({\n        ...prev,\n        [jobId]: {\n          processed: data.processed_blocks,\n          total: data.total_blocks,\n          status: data.status\n        }\n      }));\n\n      // Continue polling if still processing\n      if (data.status === \"transcribing\") {\n        setTimeout(() => pollProgress(jobId), 2000);\n      }\n    } catch (error) {\n      console.error('Error polling progress:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"dashboard-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"I\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ai-text\",\n          children: \"AI\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 14\n        }, this), \"S Tool\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidebar-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Processes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"upload-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*,.pdf\",\n              onChange: handleFileUpload,\n              id: \"file-upload\",\n              multiple: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"file-upload\",\n              className: \"upload-button\",\n              children: \"+ New Process Map\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jobs-list\",\n          children: jobs.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-jobs\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Upload a process map to get started\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this) : jobs.map(job => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `job-item ${selectedJobId === job.runId ? 'selected' : ''}`,\n            onClick: () => setSelectedJobId(job.runId),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"job-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"job-name\",\n                children: job.fileName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"job-status\",\n                children: job.status === 'complete' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"status-indicator complete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 27\n                  }, this), \"Complete\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"status-indicator processing\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 435,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"spinner-small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 436,\n                    columnNumber: 27\n                  }, this), \"Processing\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"job-progress\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"progress-bar\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"progress-fill\",\n                    style: {\n                      width: `${calculateProgress(job)}%`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 443,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"progress-percentage\",\n                  children: [calculateProgress(job), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"job-time\",\n                children: job.uploadTime\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"remove-job\",\n              onClick: e => {\n                e.stopPropagation();\n                removeJob(job.runId);\n              },\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 19\n            }, this)]\n          }, job.runId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"main-content\",\n        children: !selectedJob ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"upload-area-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"upload-area\",\n            onDragOver: handleDragOver,\n            onDrop: handleDrop,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upload-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Upload Process Map\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Drag and drop files here\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"file-types\",\n                children: \"Limit 20MB per file (PDF, PNG, JPG, and JPEG)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*,.pdf\",\n                onChange: handleFileUpload,\n                id: \"main-file-upload\",\n                multiple: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"main-file-upload\",\n                className: \"browse-button\",\n                children: \"Browse files\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 17\n            }, this), uploadStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upload-status\",\n              children: uploadStatus\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 34\n            }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading\",\n              children: \"Processing...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n            className: \"instructions\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Instructions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"To start, please upload an image or PDF of your process map. It can be a screenshot of a process map from a tool like Visio, Lucidchart, etc., a photo of a hand-drawn sketch, or any other visual representation of a process.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"You can upload multiple process maps and they will be processed simultaneously.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"job-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"job-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: selectedJob.fileName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"job-actions\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"action-button\",\n                onClick: () => removeJob(selectedJob.runId),\n                children: \"Remove Job\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"job-progress-overview\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Overall Progress\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-bar-large\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progress-fill\",\n                style: {\n                  width: `${calculateProgress(selectedJob)}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-steps\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `progress-step ${selectedJob.processMap ? 'complete' : 'active'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"step-indicator\",\n                  children: selectedJob.processMap ? '✓' : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"spinner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 528,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 524,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"step-label\",\n                  children: \"Process Map\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 531,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"step-status\",\n                  children: getStepStatus(selectedJob, 'transcription')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 532,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `progress-step ${selectedJob.bottlenecks ? 'complete' : selectedJob.bottlenecksRequested ? 'active' : ''}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"step-indicator\",\n                  children: selectedJob.bottlenecks ? '✓' : selectedJob.bottlenecksRequested ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"spinner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 539,\n                    columnNumber: 25\n                  }, this) : '2'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 535,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"step-label\",\n                  children: \"Bottlenecks\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"step-status\",\n                  children: getStepStatus(selectedJob, 'bottlenecks')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 545,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 534,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `progress-step ${selectedJob.improvements ? 'complete' : selectedJob.improvementsRequested ? 'active' : ''}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"step-indicator\",\n                  children: selectedJob.improvements ? '✓' : selectedJob.improvementsRequested ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"spinner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 552,\n                    columnNumber: 25\n                  }, this) : '3'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 548,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"step-label\",\n                  children: \"Improvements\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 557,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"step-status\",\n                  children: getStepStatus(selectedJob, 'improvements')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 547,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"job-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"section\", {\n              className: \"process-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Process Map\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 565,\n                columnNumber: 19\n              }, this), selectedJob.processMap ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-area\",\n                children: [selectedJob.processMap, /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"download-button\",\n                  onClick: () => downloadAsMd(selectedJob.runId, 'transcription'),\n                  children: \"Download as .md\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 569,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 567,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"processing-message\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"spinner-inline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 578,\n                  columnNumber: 23\n                }, this), getStepStatus(selectedJob, 'transcription')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n              className: \"bottlenecks-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Bottlenecks\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 19\n              }, this), selectedJob.currentStep >= 2 && !selectedJob.bottlenecks && !selectedJob.bottlenecksRequested && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"action-button\",\n                onClick: () => identifyBottlenecks(selectedJob.runId),\n                disabled: loading,\n                children: \"\\uD83D\\uDD0D Identify bottlenecks\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 21\n              }, this), selectedJob.bottlenecksRequested && !selectedJob.bottlenecks && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"processing-message\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"spinner-inline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 597,\n                  columnNumber: 23\n                }, this), getStepStatus(selectedJob, 'bottlenecks')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 596,\n                columnNumber: 21\n              }, this), selectedJob.bottlenecks ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-area\",\n                children: [selectedJob.bottlenecks, /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"download-button\",\n                  onClick: () => downloadAsMd(selectedJob.runId, 'bottlenecks'),\n                  children: \"Download as .md\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 21\n              }, this) : selectedJob.currentStep < 2 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"waiting-message\",\n                children: getStepStatus(selectedJob, 'bottlenecks')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 612,\n                columnNumber: 21\n              }, this) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n              className: \"improvements-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Improvements\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 619,\n                columnNumber: 19\n              }, this), selectedJob.currentStep >= 3 && !selectedJob.improvements && !selectedJob.improvementsRequested && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"action-button\",\n                onClick: () => suggestImprovements(selectedJob.runId),\n                disabled: loading,\n                children: \"\\uD83D\\uDCA1 Suggest Improvements\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 621,\n                columnNumber: 21\n              }, this), selectedJob.improvementsRequested && !selectedJob.improvements && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"processing-message\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"spinner-inline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 631,\n                  columnNumber: 23\n                }, this), getStepStatus(selectedJob, 'improvements')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 630,\n                columnNumber: 21\n              }, this), selectedJob.improvements ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-area\",\n                children: [selectedJob.improvements, /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"download-button\",\n                  onClick: () => downloadAsMd(selectedJob.runId, 'improvements'),\n                  children: \"Download as .md\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 636,\n                columnNumber: 21\n              }, this) : selectedJob.currentStep < 3 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"waiting-message\",\n                children: getStepStatus(selectedJob, 'improvements')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 646,\n                columnNumber: 21\n              }, this) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 618,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Chat, {\n        selectedJob: selectedJob\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 656,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 390,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"c7Te8fLV/zNgwnbTrHXrU/3kFyM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Chat","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","API_URL","process","env","REACT_APP_API_URL","jobs","setJobs","selectedJobId","setSelectedJobId","loading","setLoading","uploadStatus","setUploadStatus","progress","setProgress","selectedJob","find","job","runId","progressMessages","transcription","pending","processing","complete","bottlenecks","improvements","calculateProgress","processMap","transcriptionInProgress","blockProgress","processed_blocks","total_blocks","bottlenecksRequested","improvementsRequested","Math","min","round","getStepStatus","step","length","interval","setInterval","updatedJobs","hasUpdates","i","_job$status","status","includes","response","fetch","data","json","newCurrentStep","currentStep","max","setTimeout","identifyBottlenecks","suggestImprovements","error","console","clearInterval","handleFileUpload","event","uploadedFiles","target","files","file","processFile","handleDragOver","preventDefault","handleDrop","droppedFiles","dataTransfer","name","formData","FormData","append","method","body","ok","Error","log","run_id","newJob","fileName","uploadTime","Date","toLocaleString","prevJobs","pollProgress","message","map","id","alert","downloadAsMd","type","element","document","createElement","Blob","content","href","URL","createObjectURL","download","filename","appendChild","click","removeChild","removeJob","filter","remainingJobs","jobId","prev","processed","total","className","children","_jsxFileName","lineNumber","columnNumber","accept","onChange","multiple","htmlFor","onClick","style","width","e","stopPropagation","onDragOver","onDrop","disabled","_c","$RefreshReg$"],"sources":["/Users/tahmidjamal/Desktop/bpm/process_optimization_tool/procopt/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Chat from './Chat';\n\nfunction App() {\n  // Add API base URL\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001';\n  \n  // State for managing multiple jobs\n  const [jobs, setJobs] = useState([]);\n  const [selectedJobId, setSelectedJobId] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [uploadStatus, setUploadStatus] = useState('');\n  const [progress, setProgress] = useState({});\n\n  // Get the selected job from the jobs array\n  const selectedJob = jobs.find(job => job.runId === selectedJobId) || null;\n\n  // Progress status messages\n  const progressMessages = {\n    transcription: {\n      pending: \"Waiting to start...\",\n      processing: \"Analyzing process map...\",\n      complete: \"Process map analyzed\"\n    },\n    bottlenecks: {\n      pending: \"Waiting for process map...\",\n      processing: \"Identifying bottlenecks...\",\n      complete: \"Bottlenecks identified\"\n    },\n    improvements: {\n      pending: \"Waiting for bottlenecks...\",\n      processing: \"Generating improvement suggestions...\",\n      complete: \"Improvements generated\"\n    }\n  };\n\n  // Calculate overall progress percentage for a job\n  const calculateProgress = (job) => {\n    if (!job) return 0;\n    \n    let progress = 0;\n    \n    // Process map transcription (33%)\n    if (job.processMap) {\n        progress += 33;\n    } else if (job.transcriptionInProgress) {\n        // Calculate progress based on blocks\n        const blockProgress = (job.processed_blocks / job.total_blocks) * 33;\n        progress += blockProgress || 0;\n    }\n    \n    // Bottlenecks identification (33%)\n    if (job.bottlenecks) {\n        progress += 33;\n    } else if (job.bottlenecksRequested) {\n        progress += 15;\n    }\n    \n    // Improvements suggestions (34%)\n    if (job.improvements) {\n        progress += 34;\n    } else if (job.improvementsRequested) {\n        progress += 15;\n    }\n    \n    return Math.min(100, Math.round(progress));\n  };\n\n  // Get status message for a specific step\n  const getStepStatus = (job, step) => {\n    if (!job) return progressMessages[step].pending;\n    \n    switch(step) {\n      case 'transcription':\n        // Always show as processing when a file is uploaded since transcription starts immediately\n        if (job.processMap) return progressMessages.transcription.complete;\n        // Always show processing for transcription since it starts immediately after upload\n        return progressMessages.transcription.processing;\n      \n      case 'bottlenecks':\n        if (job.bottlenecks) return progressMessages.bottlenecks.complete;\n        return job.bottlenecksRequested ? progressMessages.bottlenecks.processing : progressMessages.bottlenecks.pending;\n      \n      case 'improvements':\n        if (job.improvements) return progressMessages.improvements.complete;\n        return job.improvementsRequested ? progressMessages.improvements.processing : progressMessages.improvements.pending;\n      \n      default:\n        return \"Unknown step\";\n    }\n  };\n\n  // Polling effect for all jobs\n  useEffect(() => {\n    if (jobs.length === 0) return;\n\n    const interval = setInterval(async () => {\n      // Create a copy of jobs to update\n      const updatedJobs = [...jobs];\n      let hasUpdates = false;\n\n      // Check each job that's not complete\n      for (let i = 0; i < updatedJobs.length; i++) {\n        const job = updatedJobs[i];\n        \n        // Skip jobs that are already complete\n        if (job.status === 'complete' || job.status?.includes('failed')) continue;\n\n        try {\n          const response = await fetch(`${API_URL}/runs/${job.runId}`);\n          const data = await response.json();\n          \n          // Update job data\n          if (data.status !== job.status || \n              data.transcription !== job.processMap ||\n              data.bottlenecks !== job.bottlenecks ||\n              data.improvements !== job.improvements) {\n            \n            // Calculate the current step based on available data\n            let newCurrentStep = job.currentStep;\n            if (data.transcription) newCurrentStep = Math.max(newCurrentStep, 2);\n            if (data.bottlenecks) newCurrentStep = Math.max(newCurrentStep, 3);\n            if (data.improvements) newCurrentStep = Math.max(newCurrentStep, 4);\n            \n            updatedJobs[i] = {\n              ...job,\n              status: data.status,\n              processMap: data.transcription || job.processMap,\n              bottlenecks: data.bottlenecks || job.bottlenecks,\n              improvements: data.improvements || job.improvements,\n              currentStep: newCurrentStep,\n              total_blocks: data.total_blocks || job.total_blocks,\n              processed_blocks: data.processed_blocks || job.processed_blocks,\n              transcriptionInProgress: data.transcription ? false : true\n            };\n            hasUpdates = true;\n            \n            // Automatically trigger the next step if needed\n            if (data.transcription && !data.bottlenecks && !job.bottlenecksRequested) {\n              // Mark this job as having bottlenecks requested to prevent multiple requests\n              updatedJobs[i].bottlenecksRequested = true;\n              // Queue the bottlenecks identification (will run after the state update)\n              setTimeout(() => identifyBottlenecks(job.runId), 1000);\n            }\n            \n            if (data.bottlenecks && !data.improvements && !job.improvementsRequested) {\n              // Mark this job as having improvements requested to prevent multiple requests\n              updatedJobs[i].improvementsRequested = true;\n              // Queue the improvements suggestion (will run after the state update)\n              setTimeout(() => suggestImprovements(job.runId), 1000);\n            }\n          }\n        } catch (error) {\n          console.error(`Error polling for updates for job ${job.runId}:`, error);\n        }\n      }\n\n      // Only update state if there were changes\n      if (hasUpdates) {\n        setJobs(updatedJobs);\n      }\n    }, 2000); // Poll every 2 seconds\n\n    // Cleanup function to clear interval when component unmounts\n    return () => clearInterval(interval);\n  }, [jobs, API_URL]);\n\n  const handleFileUpload = async (event) => {\n    const uploadedFiles = event.target.files;\n    if (uploadedFiles.length === 0) return;\n\n    // Process each file\n    for (let i = 0; i < uploadedFiles.length; i++) {\n      const file = uploadedFiles[i];\n      await processFile(file);\n    }\n  };\n\n  const handleDragOver = (event) => {\n    event.preventDefault();\n  };\n\n  const handleDrop = async (event) => {\n    event.preventDefault();\n    const droppedFiles = event.dataTransfer.files;\n    if (droppedFiles.length === 0) return;\n\n    // Process each file\n    for (let i = 0; i < droppedFiles.length; i++) {\n      const file = droppedFiles[i];\n      await processFile(file);\n    }\n  };\n\n  const processFile = async (file) => {\n    setLoading(true);\n    setUploadStatus(`Uploading ${file.name}...`);\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const response = await fetch(`${API_URL}/upload`, {\n        method: 'POST',\n        body: formData,\n      });\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      console.log('Upload response:', data);\n      \n      if (data.run_id) {\n        // Create a new job and add it to the jobs array\n        const newJob = {\n          runId: data.run_id,\n          fileName: file.name,\n          status: 'processing',\n          processMap: '',\n          bottlenecks: '',\n          improvements: '',\n          currentStep: 1,\n          uploadTime: new Date().toLocaleString(),\n          bottlenecksRequested: false,\n          improvementsRequested: false,\n          transcriptionInProgress: true // Mark transcription as in progress when file is uploaded\n        };\n        \n        setJobs(prevJobs => [...prevJobs, newJob]);\n        \n        // Select the new job if no job is selected\n        if (!selectedJobId) {\n          setSelectedJobId(newJob.runId);\n        }\n        console.log('New job created:', newJob);\n        \n        setUploadStatus(`${file.name} uploaded successfully!`);\n        setTimeout(() => setUploadStatus(''), 3000);\n        \n        pollProgress(data.run_id);\n      } else {\n        throw new Error('No run_id received from server');\n      }\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      setUploadStatus(`Upload failed for ${file.name}: ${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const identifyBottlenecks = async (runId) => {\n    if (!runId) return;\n    \n    // Find the job and mark it as having bottlenecks requested\n    setJobs(prevJobs => \n      prevJobs.map(job => \n        job.id === runId \n          ? { ...job, bottlenecksRequested: true } \n          : job\n      )\n    );\n    \n    setLoading(true);\n    try {\n      const response = await fetch(`${API_URL}/runs/${runId}/process/bottlenecks`, {\n        method: 'POST',\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('Bottlenecks response:', data);\n    } catch (error) {\n      console.error('Error identifying bottlenecks:', error);\n      alert('Error identifying bottlenecks: ' + error.message);\n      \n      // Reset the requested flag on error\n      setJobs(prevJobs => \n        prevJobs.map(job => \n          job.runId === runId \n            ? { ...job, bottlenecksRequested: false } \n            : job\n        )\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const suggestImprovements = async (runId) => {\n    if (!runId) return;\n    \n    // Find the job and mark it as having improvements requested\n    setJobs(prevJobs => \n      prevJobs.map(job => \n        job.runId === runId \n          ? { ...job, improvementsRequested: true } \n          : job\n      )\n    );\n    \n    setLoading(true);\n    try {\n      const response = await fetch(`${API_URL}/runs/${runId}/process/improvements`, {\n        method: 'POST',\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('Improvements response:', data);\n    } catch (error) {\n      console.error('Error suggesting improvements:', error);\n      alert('Error suggesting improvements: ' + error.message);\n      \n      // Reset the requested flag on error\n      setJobs(prevJobs => \n        prevJobs.map(job => \n          job.runId === runId \n            ? { ...job, improvementsRequested: false } \n            : job\n        )\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const downloadAsMd = async (runId, type) => {\n    if (!runId) return;\n    \n    try {\n      const response = await fetch(`${API_URL}/runs/${runId}/export/${type}`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('Download response:', data);\n      \n      const element = document.createElement('a');\n      const file = new Blob([data.content], {type: 'text/markdown'});\n      element.href = URL.createObjectURL(file);\n      element.download = data.filename;\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n    } catch (error) {\n      console.error('Error downloading file:', error);\n      alert('Error downloading file: ' + error.message);\n    }\n  };\n\n  const removeJob = (runId) => {\n    setJobs(prevJobs => prevJobs.filter(job => job.runId !== runId));\n    \n    // If the removed job was selected, select another job or set to null\n    if (selectedJobId === runId) {\n      const remainingJobs = jobs.filter(job => job.runId !== runId);\n      setSelectedJobId(remainingJobs.length > 0 ? remainingJobs[0].runId : null);\n    }\n  };\n\n  const pollProgress = async (jobId) => {\n    try {\n      const response = await fetch(`${API_URL}/runs/${jobId}/progress`);\n      const data = await response.json();\n      \n      setProgress(prev => ({\n        ...prev,\n        [jobId]: {\n          processed: data.processed_blocks,\n          total: data.total_blocks,\n          status: data.status\n        }\n      }));\n\n      // Continue polling if still processing\n      if (data.status === \"transcribing\") {\n        setTimeout(() => pollProgress(jobId), 2000);\n      }\n    } catch (error) {\n      console.error('Error polling progress:', error);\n    }\n  };\n\n  return (\n    <div className=\"dashboard\">\n      <header className=\"dashboard-header\">\n        <h1>I<span className=\"ai-text\">AI</span>S Tool</h1>\n      </header>\n      \n      <div className=\"dashboard-content\">\n        <aside className=\"sidebar\">\n          <div className=\"sidebar-header\">\n            <h2>Processes</h2>\n            <div className=\"upload-container\">\n              <input\n                type=\"file\"\n                accept=\"image/*,.pdf\"\n                onChange={handleFileUpload}\n                id=\"file-upload\"\n                multiple\n              />\n              <label htmlFor=\"file-upload\" className=\"upload-button\">\n                + New Process Map\n              </label>\n            </div>\n          </div>\n          \n          <div className=\"jobs-list\">\n            {jobs.length === 0 ? (\n              <div className=\"no-jobs\">\n                <p>Upload a process map to get started</p>\n              </div>\n            ) : (\n              jobs.map(job => (\n                <div \n                  key={job.runId} \n                  className={`job-item ${selectedJobId === job.runId ? 'selected' : ''}`}\n                  onClick={() => setSelectedJobId(job.runId)}\n                >\n                  <div className=\"job-info\">\n                    <div className=\"job-name\">{job.fileName}</div>\n                    <div className=\"job-status\">\n                      {job.status === 'complete' ? (\n                        <>\n                          <span className=\"status-indicator complete\"></span>\n                          Complete\n                        </>\n                      ) : (\n                        <>\n                          <span className=\"status-indicator processing\"></span>\n                          <span className=\"spinner-small\"></span>\n                          Processing\n                        </>\n                      )}\n                    </div>\n                    <div className=\"job-progress\">\n                      <div className=\"progress-bar\">\n                        <div \n                          className=\"progress-fill\" \n                          style={{ width: `${calculateProgress(job)}%` }}\n                        ></div>\n                      </div>\n                      <div className=\"progress-percentage\">{calculateProgress(job)}%</div>\n                    </div>\n                    <div className=\"job-time\">{job.uploadTime}</div>\n                  </div>\n                  <button \n                    className=\"remove-job\" \n                    onClick={(e) => {\n                      e.stopPropagation();\n                      removeJob(job.runId);\n                    }}\n                  >\n                    ×\n                  </button>\n                </div>\n              ))\n            )}\n          </div>\n        </aside>\n        \n        <main className=\"main-content\">\n          {!selectedJob ? (\n            <div className=\"upload-area-container\">\n              <div \n                className=\"upload-area\"\n                onDragOver={handleDragOver}\n                onDrop={handleDrop}\n              >\n                <div className=\"upload-content\">\n                  <h3>Upload Process Map</h3>\n                  <p>Drag and drop files here</p>\n                  <p className=\"file-types\">Limit 20MB per file (PDF, PNG, JPG, and JPEG)</p>\n                  <input\n                    type=\"file\"\n                    accept=\"image/*,.pdf\"\n                    onChange={handleFileUpload}\n                    id=\"main-file-upload\"\n                    multiple\n                  />\n                  <label htmlFor=\"main-file-upload\" className=\"browse-button\">\n                    Browse files\n                  </label>\n                </div>\n                {uploadStatus && <div className=\"upload-status\">{uploadStatus}</div>}\n                {loading && <div className=\"loading\">Processing...</div>}\n              </div>\n              \n              <section className=\"instructions\">\n                <h2>Instructions</h2>\n                <p>To start, please upload an image or PDF of your process map. It can be a screenshot of a process map from a tool like Visio, Lucidchart, etc., a photo of a hand-drawn sketch, or any other visual representation of a process.</p>\n                <p>You can upload multiple process maps and they will be processed simultaneously.</p>\n              </section>\n            </div>\n          ) : (\n            <div className=\"job-details\">\n              <div className=\"job-header\">\n                <h2>{selectedJob.fileName}</h2>\n                <div className=\"job-actions\">\n                  <button \n                    className=\"action-button\"\n                    onClick={() => removeJob(selectedJob.runId)}\n                  >\n                    Remove Job\n                  </button>\n                </div>\n              </div>\n              \n              <div className=\"job-progress-overview\">\n                <h3>Overall Progress</h3>\n                <div className=\"progress-bar-large\">\n                  <div \n                    className=\"progress-fill\" \n                    style={{ width: `${calculateProgress(selectedJob)}%` }}\n                  ></div>\n                </div>\n                <div className=\"progress-steps\">\n                  <div className={`progress-step ${selectedJob.processMap ? 'complete' : 'active'}`}>\n                    <div className=\"step-indicator\">\n                      {selectedJob.processMap ? (\n                        '✓'\n                      ) : (\n                        <span className=\"spinner\"></span>\n                      )}\n                    </div>\n                    <div className=\"step-label\">Process Map</div>\n                    <div className=\"step-status\">{getStepStatus(selectedJob, 'transcription')}</div>\n                  </div>\n                  <div className={`progress-step ${selectedJob.bottlenecks ? 'complete' : selectedJob.bottlenecksRequested ? 'active' : ''}`}>\n                    <div className=\"step-indicator\">\n                      {selectedJob.bottlenecks ? (\n                        '✓'\n                      ) : selectedJob.bottlenecksRequested ? (\n                        <span className=\"spinner\"></span>\n                      ) : (\n                        '2'\n                      )}\n                    </div>\n                    <div className=\"step-label\">Bottlenecks</div>\n                    <div className=\"step-status\">{getStepStatus(selectedJob, 'bottlenecks')}</div>\n                  </div>\n                  <div className={`progress-step ${selectedJob.improvements ? 'complete' : selectedJob.improvementsRequested ? 'active' : ''}`}>\n                    <div className=\"step-indicator\">\n                      {selectedJob.improvements ? (\n                        '✓'\n                      ) : selectedJob.improvementsRequested ? (\n                        <span className=\"spinner\"></span>\n                      ) : (\n                        '3'\n                      )}\n                    </div>\n                    <div className=\"step-label\">Improvements</div>\n                    <div className=\"step-status\">{getStepStatus(selectedJob, 'improvements')}</div>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"job-content\">\n                <section className=\"process-section\">\n                  <h3>Process Map</h3>\n                  {selectedJob.processMap ? (\n                    <div className=\"text-area\">\n                      {selectedJob.processMap}\n                      <button \n                        className=\"download-button\" \n                        onClick={() => downloadAsMd(selectedJob.runId, 'transcription')}\n                      >\n                        Download as .md\n                      </button>\n                    </div>\n                  ) : (\n                    <div className=\"processing-message\">\n                      <span className=\"spinner-inline\"></span>\n                      {getStepStatus(selectedJob, 'transcription')}\n                    </div>\n                  )}\n                </section>\n                \n                <section className=\"bottlenecks-section\">\n                  <h3>Bottlenecks</h3>\n                  {selectedJob.currentStep >= 2 && !selectedJob.bottlenecks && !selectedJob.bottlenecksRequested && (\n                    <button \n                      className=\"action-button\" \n                      onClick={() => identifyBottlenecks(selectedJob.runId)}\n                      disabled={loading}\n                    >\n                      🔍 Identify bottlenecks\n                    </button>\n                  )}\n                  {selectedJob.bottlenecksRequested && !selectedJob.bottlenecks && (\n                    <div className=\"processing-message\">\n                      <span className=\"spinner-inline\"></span>\n                      {getStepStatus(selectedJob, 'bottlenecks')}\n                    </div>\n                  )}\n                  {selectedJob.bottlenecks ? (\n                    <div className=\"text-area\">\n                      {selectedJob.bottlenecks}\n                      <button \n                        className=\"download-button\" \n                        onClick={() => downloadAsMd(selectedJob.runId, 'bottlenecks')}\n                      >\n                        Download as .md\n                      </button>\n                    </div>\n                  ) : selectedJob.currentStep < 2 ? (\n                    <div className=\"waiting-message\">\n                      {getStepStatus(selectedJob, 'bottlenecks')}\n                    </div>\n                  ) : null}\n                </section>\n                \n                <section className=\"improvements-section\">\n                  <h3>Improvements</h3>\n                  {selectedJob.currentStep >= 3 && !selectedJob.improvements && !selectedJob.improvementsRequested && (\n                    <button \n                      className=\"action-button\" \n                      onClick={() => suggestImprovements(selectedJob.runId)}\n                      disabled={loading}\n                    >\n                      💡 Suggest Improvements\n                    </button>\n                  )}\n                  {selectedJob.improvementsRequested && !selectedJob.improvements && (\n                    <div className=\"processing-message\">\n                      <span className=\"spinner-inline\"></span>\n                      {getStepStatus(selectedJob, 'improvements')}\n                    </div>\n                  )}\n                  {selectedJob.improvements ? (\n                    <div className=\"text-area\">\n                      {selectedJob.improvements}\n                      <button \n                        className=\"download-button\" \n                        onClick={() => downloadAsMd(selectedJob.runId, 'improvements')}\n                      >\n                        Download as .md\n                      </button>\n                    </div>\n                  ) : selectedJob.currentStep < 3 ? (\n                    <div className=\"waiting-message\">\n                      {getStepStatus(selectedJob, 'improvements')}\n                    </div>\n                  ) : null}\n                </section>\n              </div>\n            </div>\n          )}\n        </main>\n\n        <Chat selectedJob={selectedJob} />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}